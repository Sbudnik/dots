<!DOCTYPE html>
<html lang="en">
<head>
<!-- 2021-03-28 Sun 20:01 -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>&lrm;</title>
<meta name="generator" content="Org mode">
<meta name="author" content="John Mosty">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style type="text/css">
html,button,input,select,textarea {  color: #484C66;}html {  font-size: 90%;  line-height: 1.4;}*,*:before,*:after {  -moz-box-sizing: border-box;  -webkit-box-sizing: border-box;  box-sizing: border-box;}a {  white-space: pre;  white-space: pre-wrap;  white-space: pre-line;  white-space: -pre-wrap;  white-space: -o-pre-wrap;  white-space: -moz-pre-wrap;  white-space: -hp-pre-wrap;  word-wrap: break-word;  text-decoration: none;}a:hover {  color: #0A4C89;}/* * Remove text-shadow in selection highlight: h5bp.com/i * These selection rule sets have to be separate. * Customize the background color to match your design. */::-moz-selection {  background: #0A4C89;  color: #FFF;  text-shadow: none;}::selection {  background: #0A4C89;  color: #FFF;  text-shadow: none;}/* * A better looking default horizontal rule */hr {  display: block;  height: 1px;  border: 0;  border-top: 1px dashed #CCC;  margin: 1em 0;  padding: 0;}/* * Remove the gap between images, videos, audio and canvas and the bottom of * their containers: h5bp.com/i/440 */audio,canvas,img,video {  vertical-align: middle;}/* * Remove default fieldset styles. */fieldset {  border: 0;  margin: 0;  padding: 0;}/* * Allow only vertical resizing of textareas. */textarea {  resize: vertical;}/* ==========================================================================   Author's custom styles   ========================================================================== */.todo,.done,.tag {  font-family: "Source Pro", Monaco, "Courier New", monospace;  padding: 0 0.3em;  background-color: #EEE;  border: 1px solid #CCC;}.todo {  color: #DD4433;}.done {  color: #44934B;}.tag {  font-size: 80%;  font-weight: normal;  margin: 0 0.3em;  display: none;}.timestamp {  color: #BEBEBE;}.timestamp-kwd {  color: #5F9EA0;}.right {  margin-left: auto;  margin-right: 0px;  text-align: right;}.left {  margin-left: 0px;  margin-right: auto;  text-align: left;}.center {  margin-left: auto;  margin-right: auto;  text-align: center;}.underline {  text-decoration: underline;}#postamble p,#preamble p {  font-size: 90%;  margin: .2em;}pre,code {  font-family: "Source Pro", Monaco, "Courier New", monospace;  padding-left: 0.3em;  padding-right: 0.3em;}pre {  font-size: 90%;  padding: 8pt;  overflow: auto;  white-space: pre;  word-wrap: normal;}pre.src {  position: relative;}pre.src:before {  display: none;  position: absolute;  background-color: #FFF;  top: 0.5em;  right: 0.5em;  padding: 4px;  border: 1px solid #CCC;}pre.src-sh:before {  content: "Shell Script";}pre.src-bash:before {  content: "Bash Script";}pre.src-emacs-lisp:before {  content: "Emacs Lisp";}pre.src-R:before {  content: "R";}pre.src-perl:before {  content: "Perl";}pre.src-java:before {  content: "Java";}pre.src-sql:before {  content: "SQL";}pre.src-c:before {  content: "C";}pre.src-cpp:before {  content: "C++";}pre.src-html:before {  content: "HTML";}table {  border-collapse: collapse;  display: block;  overflow-x: auto;}caption.t-above {  caption-side: top;}caption.t-bottom {  caption-side: bottom;}td, th {  vertical-align: top;  border: 1px solid #CCC;  padding: 0.5em;}th.right {  text-align: center;}th.left {  text-align: center;}th.center {  text-align: center;}td.right {  text-align: right;}td.left {  text-align: left;}td.center {  text-align: center;}dt {  font-weight: bold;}#footnotes {  border-top: 5px solid #0A4C89;  margin-bottom: 5em;}#footnotes h2 {  display: none;}#text-footnotes {  margin-top: 1em;}.footpara:nth-child(2) {  display: inline;}.footpara {  display: block;}.footdef sup:before {  content: "[";}.footdef sup:after {  content: "]";}.footdef p {  display: inline;}figure {  margin: 0;}figure img {  max-width: 100%;}figcaption {  text-align: center;  font-size: 0.8rem;}.inlinetask {  padding: 10px;  border: 2px solid gray;  margin: 10px;  background: #ffffcc;}#org-div-home-and-up {  text-align: right;  font-size: 70%;  white-space: nowrap;}textarea {  overflow-x: auto;}.linenr {  font-size: smaller;}.code-highlighted {  background-color: #ffff00;}.org-info-js_info-navigation {  border-style: none;}#org-info-js_console-label {  font-size: 10px;  font-weight: bold;  white-space: nowrap;}.org-info-js_search-highlight {  background-color: #ffff00;  color: #000000;  font-weight: bold;}p.verse,blockquote {  margin: 0;  padding: 0;  padding-left: 3%;  border-left: 5px solid #0A4C89;}body {  font-family: Lora, Palatino, Georgia, serif;  width: 92%;  max-width: 1024px;  margin: 0 auto;  background-color: #FFF;}h2 {  line-height: 1.62em;}.title {  margin: 0 0 2em 0;  line-height: 2em;  border-bottom: 5px solid #0A4C89;  text-align: center;}#postamble {  font-size: 80%;  line-height: 1.4em;  text-align: right;}h1, h2, h3, h4, h5, h6 {  font-family: "Source Sans Pro", sans-serif;  color: #222;}.outline-2 {  margin-bottom: 4em;}.outline-2 h2 {  border-bottom: 1px solid #CCC;}.outline-text-2 code, pre {  background-color: #EEE;}#table-of-contents {  display: none;  margin-left: 0.5em;}#text-table-of-contents ul {  padding-left: 1.8em;}#text-table-of-contents li {  list-style-type: circle;  margin: 0.4em 0;}#text-table-of-contents ul ul {  margin: 0;}#text-table-of-contents li li {  font-weight: normal;  font-size: 90%;  margin: 0;}#content {  overflow: hidden;  *zoom: 1;}/* ==========================================================================   EXAMPLE Media Queries for Responsive Design.   These examples override the primary ('mobile first') styles.   Modify as content requires.   ========================================================================== */@media only screen and (min-width: 35em) {  /* Style adjustments for viewports that meet the condition */}@media print, (-o-min-device-pixel-ratio: 5 / 4), (-webkit-min-device-pixel-ratio: 1.25), (min-resolution: 120dpi) {  /* Style adjustments for high resolution devices */}/* ==========================================================================   Print styles.   Inlined to avoid required HTTP connection: h5bp.com/r   ========================================================================== */@media print {  * {    background: transparent !important;    color: #000 !important;    /* Black prints faster: h5bp.com/s */    box-shadow: none !important;    text-shadow: none !important;  }  a,  a:visited {    text-decoration: underline;  }  a[href]:after {    content: " (" attr(href) ")";  }  abbr[title]:after {    content: " (" attr(title) ")";  }  /*   * Don't show links for images, or javascript/internal links   */  .ir a:after,  a[href^="javascript:"]:after,  a[href^="#"]:after {    content: "";  }  pre,  blockquote {    /* border: 1px solid #999; */    page-break-inside: avoid;  }  thead {    display: table-header-group;    /* h5bp.com/t */  }  tr,  img {    page-break-inside: avoid;  }  img {    max-width: 100% !important;  }  @page {    margin: 0.5cm;  }  p,  h2,  h3 {    orphans: 3;    widows: 3;  }  h2,  h3 {    page-break-after: avoid;  }  #table-of-contents {    display: block;    width: initial;    border: none;  }  #table-of-contents a {    text-decoration: none;  }}/* large screen */@media screen and (min-width: 40rem) {  html {    font-size: 100%;  }  #table-of-contents {    display: block;    padding: 1em;    width: 32%;    min-width: 18em;    float: right;    background-color: #EEE;    position: relative;    /* required by z-index */    z-index: 5000;    border: 1px solid #CCC;  }  .tag {    display: initial;  }}
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<nav id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org203d681">1. Packages</a></li>
<li><a href="#org3e364b2">2. Basic setup</a>
<ul>
<li><a href="#org7cefa96">2.1. Font setup</a></li>
<li><a href="#orgb2c0a42">2.2. Basic UI config</a></li>
<li><a href="#org8462d30">2.3. Backups</a></li>
<li><a href="#orga2c7197">2.4. Dashboard</a></li>
</ul>
</li>
<li><a href="#orgec2a26c">3. Evil mode</a></li>
<li><a href="#org57f86aa">4. Theme config</a></li>
<li><a href="#org0715e01">5. Dired</a></li>
<li><a href="#orgdab3076">6. Ivy hydra</a></li>
<li><a href="#org498e15f">7. Helpful</a></li>
<li><a href="#org2924358">8. Magit</a></li>
<li><a href="#org78fe697">9. Org Mode</a>
<ul>
<li><a href="#org654fe23">9.1. Main Org-mode</a></li>
<li><a href="#orge9f1f74">9.2. Babel and Structure templates</a></li>
<li><a href="#orgcb5dcc1">9.3. Calfw</a></li>
<li><a href="#org4670518">9.4. Journal</a></li>
</ul>
</li>
<li><a href="#orgfa1449d">10. Presentation</a></li>
<li><a href="#orga08eb20">11. Spell</a></li>
<li><a href="#org02b3bfe">12. Python</a></li>
<li><a href="#org3afd5ec">13. Macros</a></li>
<li><a href="#org2a257ec">14. eshell</a></li>
<li><a href="#org58c1154">15. Popper</a></li>
<li><a href="#orgcf456aa">16. Custom variable</a></li>
</ul>
</div>
</nav>
<p>
#+title EMACS Config
</p>

<div id="outline-container-org203d681" class="outline-2">
<h2 id="org203d681"><span class="section-number-2">1</span> Packages</h2>
<div class="outline-text-2" id="text-1">
<ul class="org-ul">
<li>Need to M-x package-install use-package-ensure, org-bullets, for cold installs</li>
</ul>

<div class="org-src-container">
<pre class="src src-emacs-lisp">;; begin file

(require 'package)
(require 'org)

(add-to-list 'package-archives '("org" . "http://orgmode.org/elpa/"))
(add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/"))
(add-to-list 'package-archives '("melpa-stable" . "http://stable.melpa.org/packages/"))
(add-to-list 'package-archives '("elpa" . "https://elpa.gnu.org/packages/"))

(setq package-enable-at-startup nil)
(package-initialize)

(require 'use-package-ensure)
(setq use-package-always-ensure t)

(use-package auto-compile
  :config (auto-compile-on-load-mode))

(setq load-prefer-newer t)

(load-file "~/.emacs.d/sensible-defaults.el")
(sensible-defaults/use-all-settings)
(sensible-defaults/use-all-keybindings)

(use-package no-littering)
</pre>
</div>
</div>
</div>
<div id="outline-container-org3e364b2" class="outline-2">
<h2 id="org3e364b2"><span class="section-number-2">2</span> Basic setup</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org7cefa96" class="outline-3">
<h3 id="org7cefa96"><span class="section-number-3">2.1</span> Font setup</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li>This is a mac setup with fonts</li>
</ul>
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; May need to adjust this font size for the system
(defvar jwm/default-font-size 125)

(set-face-attribute 'default nil :font "Fira Code" :height jwm/default-font-size)
;; Set the fixed pitch face
(set-face-attribute 'fixed-pitch nil :font "Fira Code" :height jwm/default-font-size)
;; Set the variable pitch face
(set-face-attribute 'variable-pitch nil :font "Fira Code" :height jwm/default-font-size :weight 'regular)

(global-hl-line-mode t)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgb2c0a42" class="outline-3">
<h3 id="orgb2c0a42"><span class="section-number-3">2.2</span> Basic UI config</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; Make ESC quit prompts
(global-set-key (kbd "&lt;escape&gt;") 'keyboard-escape-quit)
(use-package diminish)

(server-start)

(setq user-full-name "John Mosty"
      user-mail-address "dubs.mosty@gmail.com"
      calendar-latitude 30.32
      calendar-longitude -97.71
      calendar-location-name "Austin, TX")

(column-number-mode)
(global-display-line-numbers-mode 1)
(setq display-line-numbers-type 'visual)
;; Disable line numbers for some modes
(dolist (mode '(term-mode-hook
		shell-mode-hook
		eshell-mode-hook))
(add-hook mode (lambda () (display-line-numbers-mode 0))))

(defun hrs/kill-current-buffer ()
  "Kill the current buffer without prompting."
  (interactive)
  (kill-buffer (current-buffer)))

(global-set-key (kbd "C-x k") 'hrs/kill-current-buffer)


  (winner-mode)

(global-set-key (kbd "&lt;f5&gt;") 'org-capture)
(global-set-key (kbd "&lt;f4&gt;") 'cfw:open-org-calendar)
(global-set-key (kbd "C-c j") 'org-journal-new-entry)

(set-window-scroll-bars (minibuffer-window) nil nil)
(add-to-list 'auto-mode-alist '("\\.org\\'" . org-mode))

(setq scroll-conservatively 100)
(setq kill-whole-line t)
(setq kill-read-only-ok t)
(setq require-final-newline t)
(setq echo-keystrokes 0.1)
(setq focus-follows-mouse t)

(setq split-height-threshold nil)
(setq split-width-threshold 0)
(setq org-confirm-elisp-link-function nil)

(setq save-interprogram-paste-before-kill t)

(setq initial-frame-alist
       '((top . 1) (left . 1) (width . 85) (height . 45)))

</pre>
</div>
</div>
</div>
<div id="outline-container-org8462d30" class="outline-3">
<h3 id="org8462d30"><span class="section-number-3">2.3</span> Backups</h3>
<div class="outline-text-3" id="text-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq backup-directory-alist `(("." . ,(expand-file-name "tmp/backups/" user-emacs-directory))))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga2c7197" class="outline-3">
<h3 id="orga2c7197"><span class="section-number-3">2.4</span> Dashboard</h3>
<div class="outline-text-3" id="text-2-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package dashboard
  :ensure t
  :config
  (dashboard-setup-startup-hook))

(setq initial-buffer-choice (lambda () (get-buffer "*dashboard*")))
(setq dashboard-banner-logo-title "Welcome to the Mac")
(setq dashboard-center-content t)
(setq dashboard-set-heading-icons t)
(setq dashboard-set-file-icons t)

</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgec2a26c" class="outline-2">
<h2 id="orgec2a26c"><span class="section-number-2">3</span> Evil mode</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil
  :init
  (setq evil-want-abbrev-expand-on-insert-exit nil
	evil-want-keybinding nil)
  :config
  (define-key evil-insert-state-map (kbd "C-g") 'evil-normal-state)
  (evil-mode 1))

(use-package evil-collection
  :after evil
  :config
  (setq evil-collection-mode-list
	'(ag dired magit mu4e which-key))
  (evil-collection-init))

(use-package evil-surround
  :config
  (global-evil-surround-mode 1))

(use-package evil-org
  :after org
  :config
  (add-hook 'org-mode-hook 'evil-org-mode)
  (add-hook 'evil-org-mode-hook
	    (lambda () (evil-org-set-key-theme)))
  (require 'evil-org-agenda)
  (evil-org-agenda-set-keys))

</pre>
</div>
</div>
</div>
<div id="outline-container-org57f86aa" class="outline-2">
<h2 id="org57f86aa"><span class="section-number-2">4</span> Theme config</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package all-the-icons)
(use-package doom-modeline
  :init (doom-modeline-mode 1)
  :custom ((doom-modeline-height 18)))

(use-package modus-themes
  :ensure                         ; omit this to use the built-in themes
  :init
  ;; Add all your customizations prior to loading the themes
    (setq modus-themes-slanted-constructs t
	  modus-themes-bold-constructs t
	  modus-themes-intense-hl-line t
	  modus-themes-subtle-line-numbers t
	  modus-themes-links 'faint-neutral-underline
	  modus-themes-syntax 'faint
	  modus-themes-completions 'opinionated
	  modus-themes-org-habit 'simplified
	  modus-themes-lang-checkers 'subtle-foreground-straight-underline
	  modus-themes-prompts 'subtle-accented)


  ;; Load the theme files before enabling a theme (else you get an error).
  (modus-themes-load-themes)
  :config
  ;; Load the theme of your choice:
  (modus-themes-load-operandi);; OR (modus-themes-load-vivendi)
  :bind ("&lt;f12&gt;" . modus-themes-toggle))

 (use-package doom-themes
   :config
;;   ;; Global settings (defaults)
;;   (setq doom-themes-enable-bold t    ; if nil, bold is universally disabled
;;         doom-themes-enable-italic t) ; if nil, italics is universally disabled
;;   ;; Enable flashing mode-line on errors
   (doom-themes-visual-bell-config))

;; (defun transparency (value)
;;   "Sets the transparency of the frame window. 0=transparent/100=opaque."
;;   (interactive "nTransparency Value 0 - 100 opaque:")
;;   (set-frame-parameter (selected-frame) 'alpha value))

;; (defun hrs/apply-theme-drk ()
;;   "Apply my chosen theme and make frames just slightly transparent."
;;   (interactive)
;;   (load-theme 'doom-one t)
;;   (transparency 100))

;; (if (daemonp)
;;     (add-hook 'after-make-frame-functions
;;               (lambda (frame)
;;               (setq doom-modeline-icon t)
;;                 (with-selected-frame frame (hrs/apply-theme-drk))))
;;   (hrs/apply-theme-drk))

;; (setq jwm/themes '(doom-one doom-one-light doom-dark+ doom-challenger-deep doom-acario-light doom-tomorrow-day doom-peacock doom-zenburn doom-gruvbox))
;; (setq jwm/themes-index 0)

;; (defun jwm/cycle-theme ()
;;   (interactive)
;;   (setq jwm/themes-index (% (1+ jwm/themes-index) (length jwm/themes)))
;;   (jwm/load-indexed-theme))

;; (defun jwm/load-indexed-theme ()
;;   (jwm/try-load-theme (nth jwm/themes-index jwm/themes)))

;; (defun jwm/try-load-theme (theme)
;;   (if (ignore-errors (load-theme theme :no-confirm))
;;       (mapcar #'disable-theme (remove theme custom-enabled-themes))
;;     (message "Unable to find theme file for '%s'" theme)))
;; (global-set-key (kbd "&lt;f12&gt;") 'jwm/cycle-theme)

</pre>
</div>
</div>
</div>
<div id="outline-container-org0715e01" class="outline-2">
<h2 id="org0715e01"><span class="section-number-2">5</span> Dired</h2>
<div class="outline-text-2" id="text-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package dired
  :ensure nil
  :commands (dired dired-jump)
  :bind (("C-x C-j" . dired-jump))
;;  :custom ((dired-listing-switches "-agho --group-directories-first"))
  :config
  (evil-collection-define-key 'normal 'dired-mode-map
    "h" 'dired-single-up-directory
    "l" 'dired-single-buffer))

(add-hook 'dired-mode-hook
      (lambda ()
	(dired-hide-details-mode)))

(use-package dired-single)

(use-package all-the-icons-dired
  :hook (dired-mode . all-the-icons-dired-mode))

;;(use-package dired-open
;;  :config
  ;; Doesn't work as expected!
  ;;(add-to-list 'dired-open-functions #'dired-open-xdg t)
;;  (setq dired-open-extensions '(("png" . "feh")
;;                                ("mkv" . "mpv"))))

(use-package dired-hide-dotfiles
  :hook (dired-mode . dired-hide-dotfiles-mode)
  :config
  (evil-collection-define-key 'normal 'dired-mode-map
    "H" 'dired-hide-dotfiles-mode))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdab3076" class="outline-2">
<h2 id="orgdab3076"><span class="section-number-2">6</span> Ivy hydra</h2>
<div class="outline-text-2" id="text-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package ivy-hydra
  :defer t
  :after hydra)

(use-package ivy
  :diminish
  :config
  (ivy-mode 1))

(use-package counsel
  :bind
  (("M-y" . counsel-yank-pop)
   :map ivy-minibuffer-map
   ("M-y" . ivy-next-line)))

(use-package swiper)
(setq ivy-use-virtual-buffers t)
(setq enable-recursive-minibuffers t)
;; enable this if you want `swiper' to use it
;; (setq search-default-mode #'char-fold-to-regexp)
(global-set-key "\C-s" 'swiper)
(global-set-key (kbd "C-c C-r") 'ivy-resume)
(global-set-key (kbd "&lt;f6&gt;") 'ivy-resume)
(global-set-key (kbd "M-x") 'counsel-M-x)
(global-set-key (kbd "C-x C-f") 'counsel-find-file)
(global-set-key (kbd "&lt;f1&gt; f") 'counsel-describe-function)
(global-set-key (kbd "&lt;f1&gt; v") 'counsel-describe-variable)
(global-set-key (kbd "&lt;f1&gt; o") 'counsel-describe-symbol)
(global-set-key (kbd "&lt;f1&gt; l") 'counsel-find-library)
(global-set-key (kbd "&lt;f2&gt; i") 'counsel-info-lookup-symbol)
(global-set-key (kbd "&lt;f2&gt; u") 'counsel-unicode-char)
(global-set-key (kbd "C-c k") 'counsel-ag)
(global-set-key (kbd "C-x l") 'counsel-locate)
(global-set-key (kbd "C-S-o") 'counsel-rhythmbox)
(global-set-key (kbd "C-M-j") 'counsel-switch-buffer)
(define-key minibuffer-local-map (kbd "C-r") 'counsel-minibuffer-history)

(use-package ivy-rich
 :init
 (ivy-rich-mode 1))

(use-package avy
  :diminish
  :bind*
  ("C-;" . evil-avy-goto-char-2))

(use-package which-key
  :init (which-key-mode)
  :diminish which-key-mode
  :config
  (setq which-key-idle-delay 0.3))

</pre>
</div>
</div>
</div>
<div id="outline-container-org498e15f" class="outline-2">
<h2 id="org498e15f"><span class="section-number-2">7</span> Helpful</h2>
<div class="outline-text-2" id="text-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package helpful
  :custom
  (counsel-describe-function-function #'helpful-callable)
  (counsel-describe-variable-function #'helpful-variable)
  :bind
  ([remap describe-function] . counsel-describe-function)
  ([remap describe-command] . helpful-command)
  ([remap describe-variable] . counsel-describe-variable)
  ([remap describe-key] . helpful-key))

</pre>
</div>
</div>
</div>
<div id="outline-container-org2924358" class="outline-2">
<h2 id="org2924358"><span class="section-number-2">8</span> Magit</h2>
<div class="outline-text-2" id="text-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package magit
  :custom
  (magit-display-buffer-function #'magit-display-buffer-same-window-except-diff-v1))
</pre>
</div>
</div>
</div>
<div id="outline-container-org78fe697" class="outline-2">
<h2 id="org78fe697"><span class="section-number-2">9</span> Org Mode</h2>
<div class="outline-text-2" id="text-9">
</div>
<div id="outline-container-org654fe23" class="outline-3">
<h3 id="org654fe23"><span class="section-number-3">9.1</span> Main Org-mode</h3>
<div class="outline-text-3" id="text-9-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
  (defun jwm/org-mode-setup ()
    (org-indent-mode)
    (variable-pitch-mode 1)
    (visual-line-mode 1))

  (defun jwm/org-font-setup ()
    ;; Set faces for heading levels
  (dolist (face '((org-level-1 . 1.2)
		  (org-level-2 . 1.1)
		  (org-level-3 . 1.05)
		  (org-level-4 . 1.0)
		  (org-level-5 . 1.1)
		  (org-level-6 . 1.1)
		  (org-level-7 . 1.1)
		  (org-level-8 . 1.1)))
    (set-face-attribute (car face) nil :font "Fira Code" :weight 'regular :height (cdr face)))

  ;; Ensure that anything that should be fixed-pitch in Org files appears that way
  (set-face-attribute 'org-block nil :foreground nil :inherit 'fixed-pitch)
  (set-face-attribute 'org-code nil   :inherit '(shadow fixed-pitch))
  (set-face-attribute 'org-table nil   :inherit '(shadow fixed-pitch))
  (set-face-attribute 'org-verbatim nil :inherit '(shadow fixed-pitch))
  (set-face-attribute 'org-special-keyword nil :inherit '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-meta-line nil :inherit '(font-lock-comment-face fixed-pitch))
  (set-face-attribute 'org-checkbox nil :inherit 'fixed-pitch))

  (use-package org
    :hook (org-mode . jwm/org-mode-setup)
    :config
    (setq org-ellipsis " ▾")
    (jwm/org-font-setup))

  (require 'org-bullets)
  (add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))

  (defun jwm/org-mode-visual-fill ()
    (setq visual-fill-column-width 100
	  visual-fill-column-center-text t)
    (visual-fill-column-mode 1))

  (use-package visual-fill-column
    :hook (org-mode . jwm/org-mode-visual-fill))

  (setq org-default-notes-file (concat org-directory "/notes.org"))

   (require 'org-habit)
    (add-to-list 'org-modules 'org-habit)
    (setq org-habit-graph-column 60)

  (defun air-org-skip-subtree-if-habit ()
    "Skip an agenda entry if it has a STYLE property equal to \"habit\"."
    (let ((subtree-end (save-excursion (org-end-of-subtree t))))
      (if (string= (org-entry-get nil "STYLE") "habit")
	  subtree-end
	nil)))

  (defun air-org-skip-subtree-if-priority (priority)
    "Skip an agenda subtree if it has a priority of PRIORITY.

  PRIORITY may be one of the characters ?A, ?B, or ?C."
    (let ((subtree-end (save-excursion (org-end-of-subtree t)))
	  (pri-value (* 1000 (- org-lowest-priority priority)))
	  (pri-current (org-get-priority (thing-at-point 'line t))))
      (if (= pri-value pri-current)
	  subtree-end
	nil)))

  (setq org-agenda-custom-commands
	'(("d" "Daily agenda and all TODOs"
	   ((tags "PRIORITY=\"A\""
		  ((org-agenda-skip-function '(org-agenda-skip-entry-if 'todo 'done))
		   (org-agenda-overriding-header "High-priority unfinished tasks:")))
	    (agenda "" ((org-agenda-ndays 1)))
	    (alltodo ""
		     ((org-agenda-skip-function '(or (air-org-skip-subtree-if-habit)
						     (air-org-skip-subtree-if-priority ?A)
						     (org-agenda-skip-if nil '(scheduled deadline))))
		      (org-agenda-overriding-header "ALL normal priority tasks:"))))
	   ((org-agenda-compact-blocks t)))))

  (global-set-key (kbd "C-c a") 'org-agenda)
  (global-set-key "\C-cl" 'org-store-link)
  (define-key global-map "\C-cL" 'org-occur-link-in-agenda-files)
  (global-set-key (kbd "&lt;home&gt;") 'beginning-of-buffer)
  (global-set-key (kbd "M-o") 'other-window)

  (setq org-capture-templates
	'(("j" "Journal entry" plain (function org-journal-find-location)
	   "** %(format-time-string org-journal-time-format)%^{Title}\n%i%?"
	   :jump-to-captured t :immediate-finish t)
	  ("t" "Tasks" entry (file+headline "" "Tasks")
	   "*** TODO %?\n%U\n %a %i" :prepend t)
	  ("T" "Tasks with ClipBoard" entry (file+headline "" "Tasks")
	   "*** TODO %?\n%U\n   %^C" :prepend t)))

  (use-package org-autolist)
  (add-hook 'org-mode-hook (lambda () (org-autolist-mode)))

(setq org-agenda-files '("~/Library/Mobile Documents/iCloud~com~appsonthemove~beorg/Documents/org"))

</pre>
</div>
</div>
</div>
<div id="outline-container-orge9f1f74" class="outline-3">
<h3 id="orge9f1f74"><span class="section-number-3">9.2</span> Babel and Structure templates</h3>
<div class="outline-text-3" id="text-9-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '((emacs-lisp . t)
   (python . t)
   (js . t)))

(setq org-confirm-babel-evaluate nil)
(require 'org-tempo)

(add-to-list 'org-structure-template-alist '("sh" . "src shell"))
(add-to-list 'org-structure-template-alist '("el" . "src emacs-lisp"))
(add-to-list 'org-structure-template-alist '("js" . "src js"))
(add-to-list 'org-structure-template-alist '("py" . "src python"))

</pre>
</div>
</div>
</div>
<div id="outline-container-orgcb5dcc1" class="outline-3">
<h3 id="orgcb5dcc1"><span class="section-number-3">9.3</span> Calfw</h3>
<div class="outline-text-3" id="text-9-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package calfw)
(use-package calfw-org)

(defun my-open-calendar ()
  (interactive)
  (cfw:open-calendar-buffer
   :contents-sources
   (list
    (cfw:org-create-source "Green")  ; orgmode source
    )))

</pre>
</div>
</div>
</div>
<div id="outline-container-org4670518" class="outline-3">
<h3 id="org4670518"><span class="section-number-3">9.4</span> Journal</h3>
<div class="outline-text-3" id="text-9-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-journal-dir "~/org/journal/")
(setq org-journal-date-format "%A, %d %B %Y")
(use-package org-journal)

(defun org-journal-find-location ()
  ;; Open today's journal, but specify a non-nil prefix argument in order to
  ;; inhibit inserting the heading; org-capture will insert the heading.
  (org-journal-new-entry t)
  (unless (eq org-journal-file-type 'daily)
    (org-narrow-to-subtree))
  (goto-char (point-max)))

(defvar org-journal--date-location-scheduled-time nil)

(defun org-journal-date-location (&amp;optional scheduled-time)
  (let ((scheduled-time (or scheduled-time (org-read-date nil nil nil "Date:"))))
    (setq org-journal--date-location-scheduled-time scheduled-time)
    (org-journal-new-entry t (org-time-string-to-time scheduled-time))
    (unless (eq org-journal-file-type 'daily)
      (org-narrow-to-subtree))
    (goto-char (point-max))))
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfa1449d" class="outline-2">
<h2 id="orgfa1449d"><span class="section-number-2">10</span> Presentation</h2>
<div class="outline-text-2" id="text-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package hide-mode-line)

(defun jwm/presentation-setup ()
  ;; Hide the mode line
  (hide-mode-line-mode 1)

  ;; Display images inline
  (org-display-inline-images) ;; Can also use org-startup-with-inline-images

  ;; Scale the text.  The next line is for basic scaling:
  (setq text-scale-mode-amount 3)
  (text-scale-mode 1)
  (blink-cursor-mode -1))

  ;; This option is more advanced, allows you to scale other faces too
  ;; (setq-local face-remapping-alist '((default (:height 2.0) variable-pitch)
  ;;                                    (org-verbatim (:height 1.75) org-verbatim)
  ;;                                    (org-block (:height 1.25) org-block))))

(defun jwm/presentation-end ()
  ;; Show the mode line again
  (hide-mode-line-mode 0)

  ;; Turn off text scale mode (or use the next line if you didn't use text-scale-mode)
 (text-scale-mode 0)
 (blink-cursor-mode 1))

  ;; If you use face-remapping-alist, this clears the scaling:
  ;; (setq-local face-remapping-alist '((default variable-pitch default))))

(use-package org-tree-slide
  :hook ((org-tree-slide-play . jwm/presentation-setup)
	 (org-tree-slide-stop . jwm/presentation-end))
  :custom
  (org-tree-slide-slide-in-effect t)
  (org-tree-slide-activate-message "Presentation started")
  (org-tree-slide-deactivate-message "Presentation finished")
  (org-tree-slide-header t)
  (org-tree-slide-breadcrumbs " //  ")
  (org-image-actual-width nil))
</pre>
</div>
</div>
</div>
<div id="outline-container-orga08eb20" class="outline-2">
<h2 id="orga08eb20"><span class="section-number-2">11</span> Spell</h2>
<div class="outline-text-2" id="text-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package company)
(global-company-mode)
(global-set-key (kbd "M-/") 'company-complete-common)

(setq ispell-program-name "/usr/local/bin/hunspell")

(require 'ispell)

(global-set-key (kbd "&lt;f8&gt;") 'ispell-word)
(global-set-key (kbd "C-&lt;f8&gt;") 'flyspell-mode)

(use-package flyspell :demand t
  :config
  (use-package flyspell-correct-ivy)
  (defun flyspellCompletion()
    (flyspell-mode 1)
    (set (make-local-variable 'company-backends)
	 (copy-tree company-backends))
    (add-to-list 'company-backends 'company-ispell))
  (defun flyspell-most-modes()
    (add-hook 'text-mode-hook 'flyspellCompletion)
    (add-hook 'prog-mode-hook 'flyspellCompletion)
    (dolist (hook '(change-log-mode-hook log-edit-mode-hook))
      (add-hook hook (lambda ()
		       (flyspell-mode -1)))))
  (flyspell-most-modes)
  :bind (:map flyspell-mode-map
	      ("C-." . flyspell-correct-wrapper)))

(use-package undo-tree)
(global-undo-tree-mode)
</pre>
</div>
</div>
</div>
<div id="outline-container-org02b3bfe" class="outline-2">
<h2 id="org02b3bfe"><span class="section-number-2">12</span> Python</h2>
<div class="outline-text-2" id="text-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq python-shell-intrepreter '("/usr/local/bin/python3"))
(setq org-babel-python-command "/usr/local/bin/python3")
</pre>
</div>
</div>
</div>
<div id="outline-container-org3afd5ec" class="outline-2">
<h2 id="org3afd5ec"><span class="section-number-2">13</span> Macros</h2>
<div class="outline-text-2" id="text-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(evil-set-register ?d [?i ?* ?  ?\C-c ?. return escape])
(evil-set-register ?t [?i ?\C-u ?\C-c ?. return escape])
</pre>
</div>
</div>
</div>
<div id="outline-container-org2a257ec" class="outline-2">
<h2 id="org2a257ec"><span class="section-number-2">14</span> eshell</h2>
<div class="outline-text-2" id="text-14">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(defun jwm/configure-eshell ()
  ;; Save command history when commands are entered
  (add-hook 'eshell-pre-command-hook 'eshell-save-some-history)

  ;; Truncate buffer for performance
  (add-to-list 'eshell-output-filter-functions 'eshell-truncate-buffer)

  ;; Bind some useful keys for evil-mode
  (evil-define-key '(normal insert visual) eshell-mode-map (kbd "C-r") 'counsel-esh-history)
  (evil-define-key '(normal insert visual) eshell-mode-map (kbd "&lt;home&gt;") 'eshell-bol)
  (evil-normalize-keymaps)

  (setq eshell-history-size         10000
	eshell-buffer-maximum-lines 10000
	eshell-hist-ignoredups t
	eshell-scroll-to-bottom-on-input t))

(use-package eshell-git-prompt)

(use-package eshell
  :hook (eshell-first-time-mode . jwm/configure-eshell)
  :config

  (with-eval-after-load 'esh-opt
    (setq eshell-destroy-buffer-when-process-dies t)
    (setq eshell-visual-commands '("htop" "zsh" "vim")))

  (eshell-git-prompt-use-theme 'git-radar))

(use-package symon)
(add-hook 'after-init-hook 'symon-mode)

(defun buffcop (buffer)
  (with-current-buffer buffer
    (buffer-string)))

</pre>
</div>
</div>
</div>

<div id="outline-container-org58c1154" class="outline-2">
<h2 id="org58c1154"><span class="section-number-2">15</span> Popper</h2>
<div class="outline-text-2" id="text-15">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package popper
  :ensure t
  :bind (("C-`"   . popper-toggle-latest)
	 ("M-`"   . popper-cycle)
	 ("C-M-`" . popper-toggle-type)
	 ("M-_"   . popper-lower-to-popup)
	 ("M-^"   . popper-raise-popup))

  :init
  (setq popper-reference-buffers
	'("^\\*Messages\\*"
	  "^Output\\*"
	  "^\\Calc:"
	  "^\\Warnings\\*"
	  "^\\*helpful\\*"
	  help-mode
	  compilation-mode
	  messages-mode
	  occur-mode))
  (setq popper-display-function #'popper-select-popup-at-bottom)
  (popper-mode +1))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgcf456aa" class="outline-2">
<h2 id="orgcf456aa"><span class="section-number-2">16</span> Custom variable</h2>
<div class="outline-text-2" id="text-16">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(org-agenda-export-html-style
   "&lt;style type=\\\"text/css\\\"&gt;
  html {
	font-size: 12pt;
  }
  .title { text-align: center; }
  .todo  { color: red; }
  .done { color: green; }
  .timestamp { color: grey }
  .timestamp-kwd { color: CadetBlue }
  .tag { background-color:lightblue; font-weight:normal }
  .target { background-color: lavender; }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #F3F5F7;
	padding: 5pt;
	font-family: consolas, monospace;
  }
  table { border-collapse: collapse; }
  td, th {
	vertical-align: top;
	&lt;!--border: 1pt solid #ADB9CC;--&gt;
  }
&lt;/style&gt;")
 '(org-agenda-include-diary t)
 '(org-agenda-skip-deadline-if-done t)
 '(org-agenda-skip-scheduled-if-done t)
 '(org-agenda-skip-timestamp-if-done t)
 '(org-agenda-start-on-weekday nil)
 '(org-agenda-sticky t)
 '(org-agenda-tags-todo-honor-ignore-options nil)
 '(org-clock-into-drawer "LOGBOOK")
 '(org-closed-keep-when-no-todo nil)
 '(org-enforce-todo-checkbox-dependencies t)
 '(org-enforce-todo-dependencies t)
 '(org-hide-emphasis-markers t)
 '(org-log-done 'time)
 '(org-log-done-with-time t)
 '(org-log-into-drawer t)
 '(org-return-follows-link t)
 '(org-special-ctrl-a/e t)
 '(org-special-ctrl-k t)
 '(org-todo-keywords '((type "TODO(t)" "DONE(d!)")))
 '(org-todo-state-tags-triggers nil)
 '(org-use-fast-todo-selection 'auto)
 '(package-selected-packages
   '(modus-themes modus-operandi-theme doom-themes-visual-bell-config doom-themes doom-modeline calfw-org calfw nvm phi-search-dired helpful which-key-posframe all-the-icons-ivy-rich ivy-rich which-key avy diminish ivy dashboard org-bullets use-package helm evil-visual-mark-mode))
 '(tab-bar-mode t)
 '(tool-bar-mode nil)
 '(vc-annotate-background nil)
 '(vc-annotate-background-mode nil))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )
</pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: John Mosty</p>
<p class="date">Created: 2021-03-28 Sun 20:01</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
